image = imread('image.jpg');

% split the image into cells
cells = imageTiler(image, 10, 10);
[x, y, z] = size(cells{1,1});

% foreach image comparison
for i = 1:10
    I = imread(sprintf('./images/natural/sun_ (%d).jpg',i));
    I = cropImage(I, [x, y]);
    cropped{i} = I;
    
    hR = imhist(I(:,:,1));
    hR = hR ./ sum(hR(:));
    hG = imhist(I(:,:,2));
    hG = hG ./ sum(hG(:));
    hB = imhist(I(:,:,3));
    hB = hB ./ sum(hB(:));
    histograms{i} = [hR, hG, hB];
end

for i = 1:10
    for j = 1:10
        results(i, j) = findHistogramEuclidean(histograms, cell2mat(cells(i,j)), 256);
    end
end

for i = 1:10
    if( i == 1)
        composite_row = cropped(results(1, i));
    else
        composite_image = [composite_image cropped(results(1,i))];
    end
end

for i = 1:10
    for j = 1:10
        if(j == 1)
            composite_row = [cropped(results(i, j))];
        else
            composite_row = [composite_row cropped(results(i, j))];
        end
    end
    rows{i} = composite_row
end

imshow(composite_image);

